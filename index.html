<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ì„œìš¸ í•œì‚´ë¦¼ ë§¤ì¥ ì§€ë„</title>
    
    <script type="text/javascript" src="https://oapi.map.naver.com/openapi/v3/maps.js?ncpClientId=7qkdn3jcxx&submodules=geocoder"></script>
    
    <style>
        body, html { margin: 0; padding: 0; height: 100%; }
        #map { width: 100%; height: 100%; }
        
        #myLocationBtn {
            position: absolute;
            bottom: 30px;
            right: 20px;
            z-index: 1000;
            background-color: white;
            border: 1px solid #ccc;
            border-radius: 5px;
            padding: 10px 15px;
            font-size: 14px;
            font-weight: bold;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            cursor: pointer;
            color: #333;
        }
        #myLocationBtn:active { background-color: #eee; }
        .info-box { padding: 10px; min-width: 150px; line-height: 1.5; font-size: 13px; }
    </style>
</head>
<body>
    
    <div id="map"></div>
    <button id="myLocationBtn">ğŸ¯ ë‚´ ìœ„ì¹˜ ë³´ê¸°</button>

    <script>
        // 0. ì§€ë„ API ë¡œë“œ ì²´í¬
        if (typeof naver === "undefined" || !naver.maps) {
            alert("ì§€ë„ê°€ ë¡œë“œë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\në„¤ì´ë²„ í´ë¼ìš°ë“œ ì½˜ì†”ì—ì„œ [Web ì„œë¹„ìŠ¤ URL]ì— Vercel ì£¼ì†Œë¥¼ ë“±ë¡í–ˆëŠ”ì§€ ê¼­ í™•ì¸í•´ì£¼ì„¸ìš”!");
        }

        var map = null;

        try {
            // 1. ì§€ë„ ì´ˆê¸°í™”
            map = new naver.maps.Map("map", {
                center: new naver.maps.LatLng(37.5665, 126.9780), // ì„œìš¸ ì‹œì²­ ì¤‘ì‹¬
                zoom: 11,
                scaleControl: false,
                logoControl: false,
                mapDataControl: false,
                zoomControl: true,
                minZoom: 6
            });
        } catch (e) {
            console.error("Map Init Error:", e);
        }

        // ë§¤ì¥ ë°ì´í„°
        var stores = [
            {name: "ê°œí¬ë§¤ì¥", address: "ì„œìš¸ ê°•ë‚¨êµ¬ ê°œí¬ë¡œ 265"},
            {name: "ëŒ€ì¹˜ë§¤ì¥", address: "ì„œìš¸ ê°•ë‚¨êµ¬ ì‚¼ì„±ë¡œ51ê¸¸ 11"},
            {name: "ì••êµ¬ì •ë§¤ì¥", address: "ì„œìš¸ ê°•ë‚¨êµ¬ ì••êµ¬ì •ë¡œ 309"},
            {name: "ê°•ì¼ë§¤ì¥", address: "ì„œìš¸ ê°•ë™êµ¬ ìƒì¼ë¡œ12ê¸¸ 99"},
            {name: "ë‘”ì´Œë§¤ì¥", address: "ì„œìš¸ ê°•ë™êµ¬ ê°•ë™ëŒ€ë¡œ55ê¸¸ 77"},
            {name: "ê°€ì–‘ë§¤ì¥", address: "ì„œìš¸ ê°•ì„œêµ¬ ê³µí•­ëŒ€ë¡œ55ê¸¸ 47"},
            {name: "ë§ˆê³¡ë§¤ì¥", address: "ì„œìš¸ ê°•ì„œêµ¬ ë§ˆê³¡ì„œë¡œ 101"},
            {name: "ìš°ì¥ì‚°ë§¤ì¥", address: "ì„œìš¸ ê°•ì„œêµ¬ ê°•ì„œë¡œ 242"},
            {name: "ë´‰ì²œë§¤ì¥", address: "ì„œìš¸ ê´€ì•…êµ¬ ì–‘ë…•ë¡œ 74"},
            {name: "ê´‘ë‚˜ë£¨ë§¤ì¥", address: "ì„œìš¸ ê´‘ì§„êµ¬ ì²œí˜¸ëŒ€ë¡œ 798-1"},
            {name: "êµ¬ì˜ë§¤ì¥", address: "ì„œìš¸ ê´‘ì§„êµ¬ ê´‘ë‚˜ë£¨ë¡œ 603"},
            {name: "ìì–‘ë§¤ì¥", address: "ì„œìš¸ ê´‘ì§„êµ¬ ëŠ¥ë™ë¡œ 50"},
            {name: "ê³ ì²™ë§¤ì¥", address: "ì„œìš¸ êµ¬ë¡œêµ¬ ì¤‘ì•™ë¡œ 100"},
            {name: "ê¸ˆì²œì‹œí¥ë§¤ì¥", address: "ì„œìš¸ ê¸ˆì²œêµ¬ ì‹œí¥ëŒ€ë¡œ77ê¸¸ 32"},
            {name: "ì¤‘ê³„ë§¤ì¥", address: "ì„œìš¸ ë…¸ì›êµ¬ í•œê¸€ë¹„ì„ë¡œ8ê¸¸ 29"},
            {name: "í•˜ê³„ë§¤ì¥", address: "ì„œìš¸ ë…¸ì›êµ¬ ì„¬ë°­ë¡œ 258"},
            {name: "ë°©í•™ë§¤ì¥", address: "ì„œìš¸ ë„ë´‰êµ¬ ë„ë´‰ë¡œ150ë‹¤ê¸¸ 28"},
            {name: "ìŒë¬¸ë§¤ì¥", address: "ì„œìš¸ ë„ë´‰êµ¬ ì‹œë£¨ë´‰ë¡œ 139"},
            {name: "ìƒë„ë§¤ì¥", address: "ì„œìš¸ ë™ì‘êµ¬ ìƒë„ë¡œ37ê¸¸ 79"},
            {name: "ë§ˆí¬ë§¤ì¥", address: "ì„œìš¸ ë§ˆí¬êµ¬ í† ì •ë¡œ 269"},
            {name: "ì„±ì‚°ë§¤ì¥", address: "ì„œìš¸ ë§ˆí¬êµ¬ ì›”ë“œì»µë¶ë¡œ 216"},
            {name: "ì•„í˜„ë§¤ì¥", address: "ì„œìš¸ ë§ˆí¬êµ¬ ë§ˆí¬ëŒ€ë¡œ 195"},
            {name: "ì—°í¬ë§¤ì¥", address: "ì„œìš¸ ì„œëŒ€ë¬¸êµ¬ ì—°í¬ë§›ë¡œ 34"},
            {name: "í™ì œë§¤ì¥", address: "ì„œìš¸ ì„œëŒ€ë¬¸êµ¬ í†µì¼ë¡œ 348"},
            {name: "ë°©ë°°ë§¤ì¥", address: "ì„œìš¸ ì„œì´ˆêµ¬ ì„œì´ˆëŒ€ë¡œ 118"},
            {name: "ì ì›ë§¤ì¥", address: "ì„œìš¸ ì„œì´ˆêµ¬ ì‹ ë°˜í¬ë¡œ 219"},
            {name: "ê¸ˆí˜¸ë§¤ì¥", address: "ì„œìš¸ ì„±ë™êµ¬ ê¸ˆí˜¸ë¡œ 102"},
            {name: "ê¸¸ìŒë§¤ì¥", address: "ì„œìš¸ ì„±ë¶êµ¬ ê¸¸ìŒë¡œ 11"},
            {name: "ëˆì•”ë§¤ì¥", address: "ì„œìš¸ ì„±ë¶êµ¬ ì•„ë¦¬ë‘ë¡œ 31-1"},
            {name: "ê°€ë½ë§¤ì¥", address: "ì„œìš¸ ì†¡íŒŒêµ¬ ì˜¤ê¸ˆë¡œ46ê¸¸ 68"},
            {name: "ì†¡íŒŒë§¤ì¥", address: "ì„œìš¸ ì†¡íŒŒêµ¬ ì†¡ì´ë¡œ 27"},
            {name: "ì‹ ì²œë§¤ì¥", address: "ì„œìš¸ ì†¡íŒŒêµ¬ ì˜¬ë¦¼í”½ë¡œ 435"},
            {name: "ì ì‹¤ë§¤ì¥", address: "ì„œìš¸ ì†¡íŒŒêµ¬ ë°±ì œê³ ë¶„ë¡œ 150"},
            {name: "ì ì‹¤ìƒˆë‚´ì—­ë§¤ì¥", address: "ì„œìš¸ ì†¡íŒŒêµ¬ ì„ì´Œí˜¸ìˆ˜ë¡œ 61"},
            {name: "ëª©ë™ë§¤ì¥", address: "ì„œìš¸ ì–‘ì²œêµ¬ ëª©ë™ë™ë¡œ 339"},
            {name: "ë¬¸ë˜ë§¤ì¥", address: "ì„œìš¸ ì˜ë“±í¬êµ¬ ë‹¹ì‚°ë¡œ 34"},
            {name: "ë³´ë¼ë§¤ë§¤ì¥", address: "ì„œìš¸ ì˜ë“±í¬êµ¬ ì‹ ê¸¸ë¡œ 29"},
            {name: "êµ¬íŒŒë°œë§¤ì¥", address: "ì„œìš¸ ì€í‰êµ¬ ì§„ê´€3ë¡œ 15-35"},
            {name: "ê´‘í™”ë¬¸ë§¤ì¥", address: "ì„œìš¸ ì¢…ë¡œêµ¬ ê²½í¬ê¶ê¸¸ 15"},
            {name: "ì‹ ë‚´ë§¤ì¥", address: "ì„œìš¸ ì¤‘ë‘êµ¬ ì‹ ë‚´ë¡œ21ê¸¸ 16"},
            {name: "ìœ„ë¡€ë§¤ì¥", address: "ê²½ê¸° ì„±ë‚¨ì‹œ ìˆ˜ì •êµ¬ ìœ„ë¡€ë™ë¡œ 61"}
        ];

        // ë§¤ì¥ ë§ˆì»¤ ì°ê¸° (ì•ˆì „ ì²˜ë¦¬ ì¶”ê°€)
        if (map) {
            stores.forEach(function(store) {
                if (!naver.maps.Service) return;
                
                naver.maps.Service.geocode({ query: store.address }, function(status, response) {
                    if (status !== naver.maps.Service.Status.OK) return;
                    try {
                        var item = response.v2.addresses[0];
                        var point = new naver.maps.Point(item.x, item.y);

                        var marker = new naver.maps.Marker({
                            position: point,
                            map: map,
                            title: store.name
                        });

                        var infoWindow = new naver.maps.InfoWindow({
                            content: '<div class="info-box"><b>' + store.name + '</b><br>' + store.address + '</div>'
                        });

                        naver.maps.Event.addListener(marker, "click", function(e) {
                            if (infoWindow.getMap()) { infoWindow.close(); } 
                            else { infoWindow.open(map, marker); }
                        });
                    } catch (err) {
                        console.log("ë§ˆì»¤ ìƒì„± ì¤‘ ì˜¤ë¥˜: " + store.name);
                    }
                });
            });
        }

        // --- ë‚´ ìœ„ì¹˜ ì°¾ê¸° ---
        var myLocationMarker = null;

        document.getElementById("myLocationBtn").addEventListener("click", function() {
            // ì•ˆì „ ì¥ì¹˜: ì§€ë„ê°€ ì—†ìœ¼ë©´ ì¤‘ë‹¨
            if (!map || !naver.maps) {
                alert("ì§€ë„ê°€ ë¡œë“œë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ìƒˆë¡œê³ ì¹¨ í•´ì£¼ì„¸ìš”.");
                return;
            }

            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(onSuccessGeolocation, onErrorGeolocation);
            } else {
                alert("ì´ ë¸Œë¼ìš°ì €ëŠ” ìœ„ì¹˜ ì •ë³´ë¥¼ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");
            }
        });

        function onSuccessGeolocation(position) {
            // naver.maps ê°ì²´ ìƒì¡´ í™•ì¸
            if (!naver.maps) {
                alert("ì§€ë„ API ë¡œë”© ì¤‘ì…ë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.");
                return;
            }

            var lat = position.coords.latitude;
            var lng = position.coords.longitude;
            var location = new naver.maps.LatLng(lat, lng);

            map.setCenter(location);
            map.setZoom(15);

            if (myLocationMarker) {
                myLocationMarker.setMap(null);
            }

            myLocationMarker = new naver.maps.Marker({
                position: location,
                map: map,
                icon: {
                    content: '<div style="background:#ff3b3b; width:16px; height:16px; border-radius:50%; border:3px solid white; box-shadow:0 0 5px rgba(0,0,0,0.5);"></div>',
                    anchor: new naver.maps.Point(11, 11)
                }
            });
        }

        function onErrorGeolocation(error) {
            var msg = "ìœ„ì¹˜ ì •ë³´ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.";
            if (error.code == 1) msg += "\n(ê¶Œí•œ ê±°ë¶€ë¨: ìœ„ì¹˜ ê¶Œí•œì„ í—ˆìš©í•´ì£¼ì„¸ìš”)";
            alert(msg);
        }
    </script>
</body>
</html>
